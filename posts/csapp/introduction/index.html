<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='1.1 Information is Bits + Contexts # The same bits may have different meaning under different contexts
// hello.c #include <stdio.h> int main() { printf("hello, world\n"); return 0; } 1.2 Programs Are Traslated by Other Programs into Different Forms # The programs that perform four phases(preprocessor, compiler, assembler, and linker) are known colletively as the compilation system
Preprocessing phase. The preprocessor(cpp) modifies the original C program according to directives that begin with the &lsquo;#&rsquo; character.'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="/posts/csapp/introduction/"><meta property="og:title" content="CSAPP: A Tour of Computer Systems"><meta property="og:description" content='1.1 Information is Bits + Contexts # The same bits may have different meaning under different contexts
// hello.c #include <stdio.h> int main() { printf("hello, world\n"); return 0; } 1.2 Programs Are Traslated by Other Programs into Different Forms # The programs that perform four phases(preprocessor, compiler, assembler, and linker) are known colletively as the compilation system
Preprocessing phase. The preprocessor(cpp) modifies the original C program according to directives that begin with the ‘#’ character.'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-22T00:10:37+08:00"><meta property="article:modified_time" content="2022-09-22T00:10:37+08:00"><title>CSAPP: A Tour of Computer Systems | </title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=/posts/csapp/introduction/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css><script defer src=/fuse.min.js></script><script defer src=/en.search.min.8aa13e2f4b9fdd1fa1c269db82d4ba6bb2746e64391b4052adb11ab4309caef3.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>CSAPP: A Tour of Computer Systems</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#11-information-is-bits--contexts>1.1 Information is Bits + Contexts</a></li><li><a href=#12-programs-are-traslated-by-other-programs-into-different-forms>1.2 Programs Are Traslated by Other Programs into Different Forms</a></li><li><a href=#13-it-pays-to-understand-compi>1.3 It pays to Understand Compi!</a></li><li><a href=#14-processor-read-and-interpret-instructions-stored-in-memory>1.4 Processor Read and Interpret Instructions Stored in Memory</a><ul><li><a href=#141-hardware-organization-of-a-system>1.4.1 Hardware organization of a System</a></li><li><a href=#142-running-the-hello-program>1.4.2 Running the hello Program</a></li></ul></li><li><a href=#15-caches-matter>1.5 Caches Matter</a></li><li><a href=#16-storage-devices-form-a-hierarchy>1.6 Storage Devices Form a Hierarchy</a></li><li><a href=#17-the-operating-system-manages-the-hardware>1.7 The Operating System Manages the Hardware</a><ul><li><a href=#171-processes>1.7.1 Processes</a></li><li><a href=#172-threads>1.7.2 Threads</a></li><li><a href=#173-virtual-memory>1.7.3 Virtual Memory</a></li><li><a href=#174-files>1.7.4 Files</a></li></ul></li><li><a href=#18-systems-communicatie-with-other-systems-using-networks>1.8 Systems Communicatie with Other Systems Using Networks</a></li><li><a href=#19-important-themes>1.9 Important Themes</a><ul><li><a href=#191-amdahls-law>1.9.1 Amdahl&rsquo;s Law</a></li><li><a href=#192-concurrency-and-parallelism>1.9.2 Concurrency and Parallelism</a></li><li><a href=#193-the-importance-of-abstractions-in-computer-systems>1.9.3 The importance of Abstractions in Computer Systems</a></li></ul></li></ul></nav></aside></header><article class="markdown book-post"><h1><a href=/posts/csapp/introduction/>CSAPP: A Tour of Computer Systems</a></h1><h5>September 22, 2022</h5><div><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a></div><h2 id=11-information-is-bits--contexts>1.1 Information is Bits + Contexts
<a class=anchor href=#11-information-is-bits--contexts>#</a></h2><p>The same bits may have different meaning under different contexts</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>// hello.c
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;hello, world</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><img src=/images/be1a33a3e4634fa4e621a2ed91f42f44e8c2f9665fcbe660c14691fc5c02825f.png alt="图 3"></p><h2 id=12-programs-are-traslated-by-other-programs-into-different-forms>1.2 Programs Are Traslated by Other Programs into Different Forms
<a class=anchor href=#12-programs-are-traslated-by-other-programs-into-different-forms>#</a></h2><p><img src=/images/5c818ebc36e28ba95814e2d1891ac1ad1a391c63a556fc09be2b6451cff31d99.png alt="图 1"></p><p>The programs that perform four phases(<em>preprocessor, compiler, assembler, and linker</em>) are known colletively as the <em>compilation system</em></p><ul><li><em>Preprocessing phase</em>. The preprocessor(cpp) modifies the original C program according to directives that begin with the &lsquo;#&rsquo; character. And insert it direcly into another program text(another C program, end with .i suffix)</li><li><em>Compilation phase</em>. The compiler(cc1) translate the text file hello.i into text file hello.s (contains an assembly-language program.)</li><li><em>Assembly phase</em>. The assembler(as) traslates hello.s into machine-language instructions, packages them in a form known as <em><strong>relocatable object program</strong></em> and store the result the object file hello.o. This file is a binary file containing 17 bytes to encode the instructions for function main.</li><li><em>Lingking Phase</em>. linker(ld) handles merging of code. The result is hello file, which is an executable object file.</li></ul><h2 id=13-it-pays-to-understand-compi>1.3 It pays to Understand Compi!
<a class=anchor href=#13-it-pays-to-understand-compi>#</a></h2><p><a href=/images/6b251f20a7f65dc53b7b53ca7b96c4454b0b8806e7a6a90d25f004c7d7d76a10.png>图 7</a><br>lation Systems Work</p><ul><li><em>To optimize programm performance</em></li><li><em>To Understand link-time errors</em></li><li><em>To avoid security holes</em></li></ul><h2 id=14-processor-read-and-interpret-instructions-stored-in-memory>1.4 Processor Read and Interpret Instructions Stored in Memory
<a class=anchor href=#14-processor-read-and-interpret-instructions-stored-in-memory>#</a></h2><h3 id=141-hardware-organization-of-a-system>1.4.1 Hardware organization of a System
<a class=anchor href=#141-hardware-organization-of-a-system>#</a></h3><p><img src=/images/b49bcbc5bbdccdee598dce8e685a8d2181839fea23e0bc9c319fe34d3b0a59c0.png alt="图 5"></p><ul><li>Buses</li><li>I/O Devices</li><li>Main Memory</li><li>Processor</li></ul><h3 id=142-running-the-hello-program>1.4.2 Running the hello Program
<a class=anchor href=#142-running-the-hello-program>#</a></h3><p><img src=/images/14db4ca2480ca3261c241a2880f378aaec99e92c28eb045ade11024a1de2476b.png alt="图 9"></p><h2 id=15-caches-matter>1.5 Caches Matter
<a class=anchor href=#15-caches-matter>#</a></h2><p><img src=/images/e5437896172f14eafcaaee0b332e0639287c85466d15933ed91655067971ea51.png alt="图 10"></p><h2 id=16-storage-devices-form-a-hierarchy>1.6 Storage Devices Form a Hierarchy
<a class=anchor href=#16-storage-devices-form-a-hierarchy>#</a></h2><p><img src=/images/22ee5b3c801e188f877664d932a5f0a438408fce9cce3bc6e81b476981bddf3e.png alt="图 11"></p><h2 id=17-the-operating-system-manages-the-hardware>1.7 The Operating System Manages the Hardware
<a class=anchor href=#17-the-operating-system-manages-the-hardware>#</a></h2><p><img src=/images/81a6d7758d8e04866c00478fe2c197982ae7eb3fbc0508f93554ec35ca6427ea.png alt="图 13"></p><p>As figure suggests:</p><ul><li>Files are abstractions for I/O devices</li><li>Virtual memory is a abstractions for both the main memory and disk I/O devices</li><li>Processes are abstrations for the processor, main memory, and I/O devices</li></ul><h3 id=171-processes>1.7.1 Processes
<a class=anchor href=#171-processes>#</a></h3><p>The operation system keeps track of all the state information that the process needs in order to run.</p><p>This state, <strong>context</strong> includes infromation such as :</p><ul><li>the current value of the PC</li><li>the register file</li><li>the contents of main memory</li></ul><p><img src=/images/9db19e81638a1bb799fbacb70851fe8d7e01cd0791bf3f176590f54c22ded286.png alt="图 14"></p><p>As Figure above indicates, the transition from one process to another process is managed by the operation system <strong>kernel</strong></p><p>Kernel is not a separate process. It is a collection of code and data structures that the system uses to manage all the process.</p><h3 id=172-threads>1.7.2 Threads
<a class=anchor href=#172-threads>#</a></h3><p>A process can consist of multiple execution units, called threads, each running in the context of the process ans sharing the same code and global data.</p><h3 id=173-virtual-memory>1.7.3 Virtual Memory
<a class=anchor href=#173-virtual-memory>#</a></h3><p><img src=/images/d3c943aacbe69f3135cbc340f16d57d37ed223e0a327ae3975c681e4a89d85aa.png alt="图 15"></p><p>Virtual memory is an abstractio that provides each process with the <strong>illusion</strong> that is has exclusive use of the main memory.
Each process has the same uniform view of memory, which is known as its <strong>virtual address space</strong>.</p><ul><li><em>Program code and data</em>. Code and data areas are initialized directly from the contents of an executable object file.</li><li><em>Heap</em>. The code and data areas are followed immediately by the run-time <em>heap</em>, the heap expands and contracts dynamically at run time as a result of calls to C standard library routines such as malloc and free.</li><li><em>Shared libraries</em>. Near the middle of the address space is the shared libraries. It is powerful but somewhat difficult.</li><li><em>Stack</em>. At the top of the user&rsquo;s virtual address space is the user stack that the compiler uses to implement function calls.</li><li><em>Kernel virtual memory</em>. The top region of the address space. This is reservied for the kernel.</li></ul><h3 id=174-files>1.7.4 Files
<a class=anchor href=#174-files>#</a></h3><p>Introduce later</p><h2 id=18-systems-communicatie-with-other-systems-using-networks>1.8 Systems Communicatie with Other Systems Using Networks
<a class=anchor href=#18-systems-communicatie-with-other-systems-using-networks>#</a></h2><p>Network can be viewed as another I/O device. Examples cloude view below.
<img src=/images/14b18a714f79ad3329422c2532402d547a1ebc6e8f6673c0e8d8970d1e21afa1.png alt="图 16"></p><p><img src=/images/0cd4521b20979a6aa734b35a9f35e4a57f8d6048e4866fe362c28047603bca50.png alt="图 17"></p><h2 id=19-important-themes>1.9 Important Themes
<a class=anchor href=#19-important-themes>#</a></h2><h3 id=191-amdahls-law>1.9.1 Amdahl&rsquo;s Law
<a class=anchor href=#191-amdahls-law>#</a></h3><p>let&rsquo;s say:</p><ul><li>$T_{new}$: the time after optimization</li><li>$T_{old}$: The tiem before optimization</li><li>$\alpha$: The fraction that optimized time can be optimized</li><li>k: improve performance by a factor of k</li></ul><p>$$
T_{new}=(1-\alpha)T_{old}+(\alpha T_{old})/k
$$
$$
=T_{old}[(1 - \alpha ) + \alpha / k]
$$
The speedup S is :
$S = T_{old}/T_{new}$
$=$$1 \over (1 - \alpha ) + \alpha / k$</p><p>Amdahl&rsquo;s law describes a general principle for improving any process. In addition to reduce the cost of manufacturing razor blades, or a student trying to improve his or her grade point average.</p><h3 id=192-concurrency-and-parallelism>1.9.2 Concurrency and Parallelism
<a class=anchor href=#192-concurrency-and-parallelism>#</a></h3><ul><li><strong>Concurrency</strong>: refer to the general concept of a system with multiple, simultaneous activities</li><li><strong>Parallelism</strong>: refer to the use of concurrency to make a system run faster. Parallelism can be exploited at multiple levels of abstraction in a computer system. We highlight three levels here:</li></ul><ol><li>Thread level Parallelism</li></ol><p><img src=/images/d97360fb908efd3cd35553cf7ea2a9244692259a2626ca4a88a08b4643ae7a2d.png alt="图 18"></p><p><img src=/images/0736ba9748506309ea9610bd45104b8d2267279690b95654aec7a105b8dace3f.png alt="图 19"></p><ol start=2><li>Instruction-Level Parallelism</li></ol><p>Modern processors can execute multiple instructions at one time. For example, early microprcessors (Intel 8086) required multiple clock cycles to execute a single instruction(IPC). More recent processors can rate 2-4 instructions per clocl cycle.</p><p>Processors that cal sustain execution rates faster than 1 instruction per cycle are called <strong>superscalar processors</strong>.</p><ol start=3><li>Single-Instruction, Multiple-Data(SIMD) Parallelism
See Web Aside: OPT:SIMD</li></ol><h3 id=193-the-importance-of-abstractions-in-computer-systems>1.9.3 The importance of Abstractions in Computer Systems
<a class=anchor href=#193-the-importance-of-abstractions-in-computer-systems>#</a></h3><p><img src=/images/5b610004bf06e6bebd0994e8f69d76b3f07bb205c7a4c3fe89bb5a153f6a87cb.png alt="图 20"></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#11-information-is-bits--contexts>1.1 Information is Bits + Contexts</a></li><li><a href=#12-programs-are-traslated-by-other-programs-into-different-forms>1.2 Programs Are Traslated by Other Programs into Different Forms</a></li><li><a href=#13-it-pays-to-understand-compi>1.3 It pays to Understand Compi!</a></li><li><a href=#14-processor-read-and-interpret-instructions-stored-in-memory>1.4 Processor Read and Interpret Instructions Stored in Memory</a><ul><li><a href=#141-hardware-organization-of-a-system>1.4.1 Hardware organization of a System</a></li><li><a href=#142-running-the-hello-program>1.4.2 Running the hello Program</a></li></ul></li><li><a href=#15-caches-matter>1.5 Caches Matter</a></li><li><a href=#16-storage-devices-form-a-hierarchy>1.6 Storage Devices Form a Hierarchy</a></li><li><a href=#17-the-operating-system-manages-the-hardware>1.7 The Operating System Manages the Hardware</a><ul><li><a href=#171-processes>1.7.1 Processes</a></li><li><a href=#172-threads>1.7.2 Threads</a></li><li><a href=#173-virtual-memory>1.7.3 Virtual Memory</a></li><li><a href=#174-files>1.7.4 Files</a></li></ul></li><li><a href=#18-systems-communicatie-with-other-systems-using-networks>1.8 Systems Communicatie with Other Systems Using Networks</a></li><li><a href=#19-important-themes>1.9 Important Themes</a><ul><li><a href=#191-amdahls-law>1.9.1 Amdahl&rsquo;s Law</a></li><li><a href=#192-concurrency-and-parallelism>1.9.2 Concurrency and Parallelism</a></li><li><a href=#193-the-importance-of-abstractions-in-computer-systems>1.9.3 The importance of Abstractions in Computer Systems</a></li></ul></li></ul></nav></div></aside></main></body></html>