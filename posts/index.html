<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="/posts/"><meta property="og:title" content="Posts"><meta property="og:locale" content="en"><meta property="og:type" content="website"><title>Posts | </title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=/posts/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css><script defer src=/fuse.min.js></script><script defer src=/en.search.min.8aa13e2f4b9fdd1fa1c269db82d4ba6bb2746e64391b4052adb11ab4309caef3.js></script><link rel=alternate type=application/rss+xml href=/posts/index.xml title></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Posts</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a>
<span>4</span></li><li class="flex justify-between"><a href=/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/>机器学习</a>
<span>3</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E8%AF%AD%E8%A8%80/>机器语言</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/class%E6%96%87%E4%BB%B6/>Class文件</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/java/>Java</a>
<span>9</span></li><li class="flex justify-between"><a href=/tags/jvm/>JVM</a>
<span>9</span></li><li class="flex justify-between"><a href=/tags/%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/>监控工具</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%B1%BB%E8%A3%85%E8%BD%BD%E5%99%A8/>类装载器</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gc/>GC</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/>参数调优</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/>机器学习</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/%E9%9A%90%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB/>隐马尔可夫</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%BD%91%E7%BB%9C/>贝叶斯网络</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%81%9A%E7%B1%BB/>聚类</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%A7%86%E9%A2%91/>视频</a>
<span>1</span></li></ul></li></ul></nav></aside></header><article class="markdown book-post"><h2><a href=/posts/csapp/mlrp/>CSAPP: Machine-Level Representation of Programs</a></h2><h5>September 30, 2022</h5><div><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a></div><div><a href=/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a>,
<a href=/tags/%E6%9C%BA%E5%99%A8%E8%AF%AD%E8%A8%80/>机器语言</a></div><p>3.2 程序编码 # long mult2(long, long); void multstore(long x, long y, long *dest) { long t = mult2(x, y); *dest = t; } # 生成汇编代码 -> .s gcc -Og -S mstore.c # 生成目标代码 -> .o gcc -Og -c mstore.c # 查看机器码内容 objdump -d mstore.o 3.3 数据格式 # 3.4 访问信息 # 一个 x86_64 CPU 包含一组16个村粗64位值的通用目的寄存器. 这些寄存器用来存储整数数据和指针
字节级操作可以访问最低的字节 16位操作可以访问最低的2个字节 32位操作可以访问最低的4个字节 64位操作可以访问整个寄存器
最特别的: 栈指针 %rsp, 用来指明运行时栈的结束位置
3.4.1 操作数指示符 # 不同的操作数的可能性被分为三种类型:
立即数(immediate): 表示常数值, 书写方式是&rsquo;$&rsquo; 后面跟一个用标准C表示法表示的整数.
<a href=/posts/csapp/mlrp/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/csapp/rami/>CSAPP: Representing and Manipulating Information</a></h2><h5>September 26, 2022</h5><div><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a></div><p>TO be continue
2.1 Information Storage #</p></article><article class="markdown book-post"><h2><a href=/posts/csapp/introduction/>CSAPP: A Tour of Computer Systems</a></h2><h5>September 22, 2022</h5><div><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a></div><p>1.1 Information is Bits + Contexts # The same bits may have different meaning under different contexts
// hello.c #include &lt;stdio.h> int main() { printf("hello, world\n"); return 0; } 1.2 Programs Are Traslated by Other Programs into Different Forms # The programs that perform four phases(preprocessor, compiler, assembler, and linker) are known colletively as the compilation system
Preprocessing phase. The preprocessor(cpp) modifies the original C program according to directives that begin with the &lsquo;#&rsquo; character.
<a href=/posts/csapp/introduction/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/csapp/preface/>CSAPP: Preface</a></h2><h5>September 21, 2022</h5><div><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a></div><p>A Tour of Computer Systems # C1: A Tour of Computer Systems
Part I: Program Structure and Execution # C2: Representing and Manipulating Information
C3: Machine-Level Representation of Programs
C4: Processor Architecture
C5: Optimizing Program Performance
C6: The Memory Hierarchy
Part II: Running Prgrams on a System # C7: Linking
C8: Exceptional Control Flow
C9: Virtual Memory
Part III: Interaction and Communication between Programs # C10: System-Level I/O
C11: Network Programming
<a href=/posts/csapp/preface/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/markdown/markdown_review/>Markdown复习</a></h2><h5>September 17, 2022</h5><p>基础语法 # 标题 # Markdown支持6中级别的标题, 对应HTML标签h1-h6
# h1 ## h2 ### h3 #### h4 ##### h5 ###### h6 此外, markdown还支持简单的两级标题设置
这是一级标题 === 这是二级标题 --- 段落及区块引用 # > 这段文字将被高亮显示 这段文字将被高亮显示
插入链接或图片 # [点击跳转至百度](http://www.baidu.com) ![图片](https://vincent--li.github.io/favicon.ico) 自动生成连接 &lt;https://www.baidu.com> 点击跳转至百度
自动生成连接 https://www.baidu.com
注: 引用图片和链接的唯一区别就是最前面的叹号
列表 # Markdown支持有序列表和无序列表两种形式:
无序列表使用*或+或-标识 有序列表使用数字加.标识,例如1. * 黄瓜 * 玉米 * 茄子 + 黄瓜 + 玉米 + 茄子 - 黄瓜 - 玉米 - 茄子 1. 黄瓜 2. 玉米 3. 茄子 以上标记效果如下
<a href=/posts/markdown/markdown_review/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/java/java_class_file_analysis/>Java Class文件结构</a></h2><h5>August 1, 2019</h5><div><a href=/tags/jvm/>JVM</a>,
<a href=/tags/java/>Java</a>,
<a href=/tags/class%E6%96%87%E4%BB%B6/>Class文件</a></div><p>语言无关性 # graph LR A(*.java)-->D(.class) B(*.rb)-->D C(*.groovy)-->D E(其它JVM语言)-->D D-->F(JVM) 文件结构 # u1 = 1byte
类型 名称 数量 u4 magic 1 u2 minor_version 1 u2 major_version 1 u2 constant_pool_count 1 cp_info constant_pool constant_pool_count-1 u2 access_flags 1 u2 this_class 1 u2 super_class 1 u2 interfaces_count 1 u2 interfaces interfaces_count u2 fields_count 1 field_info fields fields_count u2 methods_count 1 method_info methods methods_count u2 attribute_count 1 attribute_info attributes attributes_count magic u4 # 0xCAFEEBABE constant_pool_count u2 # 常量池中, 常量的个数
<a href=/posts/java/java_class_file_analysis/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/java/jvm_lock/>JVM锁</a></h2><h5>July 20, 2019</h5><div><a href=/tags/jvm/>JVM</a>,
<a href=/tags/java/>Java</a></div><p>线程安全 # 多线程网站统计访问人数 # 使用锁, 维护计数器的串行访问与安全性 多线程方位ArrayList public static List&lt;Integer> numberList = new ArrayList&lt;Integer>(); public static class AddToList implements Runnable{ int startnum=0; public AddToList(int startnumber){ startnum=startnumber; } @Override public void run(){ int count=0; while(count&lt;1000000){ numberList.add(startnum); startnum+=2; count++; } } } public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(new AddToList(0)); Thread t2 = new Thread(new AddToList(1)); t1.start(); t2.start(); while(t1.isAlive()||t2.isAlive()){ Thread.sleep(1); } System.out.println(numberList.size()); } 对象头Mark # Mark Word , 对象头的标记, 32位 描述对象的hash, 锁信息, 垃圾回收标记, 年龄 指向锁记录的指针 指向monitor的治身 GC标记 偏向锁线程ID 偏向锁 # 大部分情况是没有竞争的, 所以可以通过偏向来提高性能 所谓偏向, 就是偏心, 即锁会偏向于当前已经占有锁的线程 将对象头Mark标记设置为偏向, 并将线程ID写入对象头Mark 只要没有竞争, 获得偏向锁的线程,在将来进入同步块,不需要做同步 当其他线程请求相同的锁时, 偏向模式结束 -XX:+UseBiasedLocking 默认启用 在竞争激烈的场合, 偏向锁会增加系统负担 // -XX:+UseBiasedLocking -XX:BiasedLockingStartupDelay=0 public static List&lt;Integer> numberList = new Vector&lt;Integer>(); public static voi main(String[] args) throws InterruptedException { long begin = System.
<a href=/posts/java/jvm_lock/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/java/jvm_heap_analysis/>Java堆分析</a></h2><h5>July 14, 2019</h5><div><a href=/tags/java/>Java</a>,
<a href=/tags/jvm/>JVM</a></div><p>MAT使用基础 Memory Analyse Tool # 浅堆(Shallow Heap) # 一个对象结构所占用的内存大小 3个int类型以及一个引用类型合计占用3*4+4=16字节, 再加上对象头的8个字节,因此String对象占用的控件,即浅堆的大小是16+8=24字节 对象大小按照8字节对齐 浅堆大小和对象的内容无关, 只和对象的结构有关 深堆(Retained Heap) # 一个对象被GC后,可以真实释放的内存大小 只能通过对象访问到的(直接或者间接)所有对象和浅堆之和(支配树) 显示入引用(incoming)和出引用(outgoing) # 支配树 # 对象引用图中, 所有指向对象B的路径都经过对象A, 则认为对象A支配对象B 如果对象A是离对象B最近的一个支配对象,则认为对象A为对象B的直接支配者 支配者被回收, 被支配者也被回收 对象引用图 # graph TD A((A))-->C((C)) B((B))-->C C-->D((D)) C-->E((E)) E-->G((G)) G-->H((H)) D-->F((F)) F-->D F-->H 支配树 # graph TD root((root))-->A((A)) root-->B((B)) root-->C((C)) C-->D((D)) C-->E((E)) C-->H((H)) D-->F((F)) E-->G((G))</p></article><article class="markdown book-post"><h2><a href=/posts/java/jvm_performance_monitor/>JVM性能监控工具</a></h2><h5>July 13, 2019</h5><div><a href=/tags/jvm/>JVM</a>,
<a href=/tags/java/>Java</a>,
<a href=/tags/%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/>监控工具</a></div><p>系统性能监控 # uptime 系统时间 运行时间 连接数: 每个终端算一个连接数 1/5/15分钟系统平均负载 top 第一行同uptime cpu内存 每个进程占CPU的情况 vmstat 可以统计系统的CPU, 内存, swap, io等情况 CPU占用率很高, 上下文切换频繁, 说明系统有线程正在频繁切换 pidstat 细致观察进程 需要安装 监控CPU 监控IO 监控内存 Java自带工具 # jdk安装目录下的tools目录下.
jps # 列出java进程, 类似ps命令 -q指定jps只输出进程ID, 不输出类的短名称 -m输出传递给Java进程(主函数)的参数 -l可以用于输出主函数的完整路径 -v可以显式传递给JVM的参数 jinfo # 可以用来查看正在运行的Java应用程序的扩展参数, 甚至支持在运行时,修改部分参数 -flag &lt;name> : 打印指定的JVM的参数值 -flag [+|-] &lt;name>: 指定JVM参数的布尔值 -flag &lt;name>=&lt;value>: 设置指定JVM参数的值 # 显示新生代对象晋升到老年代对象的最大年龄 jinfo -flag MaxTenuringThreshold 2972 -XX:MaxTenuringThreshold=15 # 显示是否打印GC详细信息 jinfo -flag PrintGCDetails 2972 -XX:-PrintGCDetails # 运行时修改参数, 控制是否输出GC日志 jinof -flag PrintGCDetails 2972 -XX:-PrintGCDetails jinfo -flag +PrintGCDetails 2972 jinfo -flag PrintGCDetails 2972 -XX:+PrintGCDetails jmap # 生成Java应用程序的堆快照和对象的统计信息 jmap -histo 2972 >c:\s.
<a href=/posts/java/jvm_performance_monitor/>...</a></p></article><article class="markdown book-post"><h2><a href=/posts/java/java_class_loader/>Java 类装载器</a></h2><h5>July 9, 2019</h5><div><a href=/tags/java/>Java</a>,
<a href=/tags/jvm/>JVM</a>,
<a href=/tags/%E7%B1%BB%E8%A3%85%E8%BD%BD%E5%99%A8/>类装载器</a></div><p>class装载验证流程 # 加载 # 装载类的第一阶段 取得类的二进制流 转为方法区数据结构 在Java堆中生成对应的java.lang.Class对象 链接 # 验证 # 目的: 保证Class流的格式是正确的
文件格式的验证 持否以0xCAFEBABE开头 版本号时候合理 元数据验证 是否有父类 继承了final类? 非抽象类是否实现了所有的抽象方法 字节码验证(很复杂) 运行检查 栈数据类型和操作码数据参数吻合 跳转指令指定到合理的位置 符号引用验证 常量池中描述类是否存在 访问的方法或字段是否存在且有足够的权限 准备 # 分配内存,并为类设置初始值(方法区中) public static int v=1 在准备阶段中, v会被设置为0 在初始化的clinit中才会被设置为1 对于static final类型, 在准备阶段就会被赋为正常的值 public static final int v=1 解析 # 符号引用替换为直接引用 符号引用: 字符串引用对象不一定被加载 直接引用: 指针或者地址偏移量, 引用对象一定在内存 初始化 # 执行类构造器clinit static变量 赋值语句 static{}语句 子类的clinit调用前保证父类的clinit被调用 clinit是线程安全的 什么是类装载器ClassLoader # ClassLoader是一个抽象类 ClassLoader的实例将读入Java字节码将类装载到JVM中 ClassLoader可以定制,满足不同的字节码流获取方式 ClassLoader负责类装在过程中的加载阶段 ClassLoader的重要方法 # //载入并返回一个Class public Class&lt;?
<a href=/posts/java/java_class_loader/>...</a></p></article><ul class="pagination pagination-default"><li class="page-item disabled"><a aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a></li><li class="page-item disabled"><a aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a></li><li class="page-item active"><a aria-current=page aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/posts/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/posts/page/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/posts/page/2/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a>
<span>4</span></li><li class="flex justify-between"><a href=/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/>机器学习</a>
<span>3</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/>操作系统</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E8%AF%AD%E8%A8%80/>机器语言</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/class%E6%96%87%E4%BB%B6/>Class文件</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/java/>Java</a>
<span>9</span></li><li class="flex justify-between"><a href=/tags/jvm/>JVM</a>
<span>9</span></li><li class="flex justify-between"><a href=/tags/%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/>监控工具</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%B1%BB%E8%A3%85%E8%BD%BD%E5%99%A8/>类装载器</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gc/>GC</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/>参数调优</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/>机器学习</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/%E9%9A%90%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB/>隐马尔可夫</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%BD%91%E7%BB%9C/>贝叶斯网络</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%81%9A%E7%B1%BB/>聚类</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%A7%86%E9%A2%91/>视频</a>
<span>1</span></li></ul></li></ul></nav></div></aside></main></body></html>